---
title: "Nowa oferta"
---


<Frame>
  <img
    src="/images/Oferty.png"
    alt="Zrzut ekranu z interfejsu: Nowa oferta"
    style={{ borderRadius:"0.5rem" }}
  />
</Frame>

---

## Opis interfejsu

To jest interfejs typu **Record review**.\
Po lewej stronie ekranu widoczna jest **lista rekordów**, a po prawej **szczegóły danego rekordu** z przyciskami akcji.

Ten interfejs stanowi _wgląd_ w arkusz **Oferty** – każda zmiana tutaj wprowadzona modyfikuje rekord w bazie danych.

## Lista rekordów

### Właściwości listy

<Frame>
  <img
    src="/images/Oferty-filtry.png"
    alt="Zrzut ekranu z interfejsu: Oferta – właściwości listy"
    style={{ borderRadius:"0.5rem",width:"99%" }}
  />
</Frame>

W prawym górnym rogu widzimy przyciski:

- **Plus** – do [utworzenia nowej oferty](#dodawanie-nowej-oferty)
- **Kwadrat ze strzałką** – otwiera stronę [Oferta ze zlecenia](/interfejsy/oferty/oferta-ze-zlecenia)
- ⋯ **Trzy kropki** – dodatkowe opcje, np. wydrukowanie rekordu

Poniżej znajdują się mniejsze przyciski sterujące właściwościami listy:

- **Group** – grupowanie rekordów
- **Filter** – filtrowanie rekordów wg dowolnych pól
- **Sort** – sortowanie listy (domyślnie wg daty utworzenia)

Po lewej stronie, pod napisem _Oferty_, można wybrać wzór filtrowania (np. tylko wygenerowane oferty).\
Na dole widoczny jest **pasek wyszukiwania** – pozwala znaleźć rekord po dowolnym polu widocznym w [podsumowaniu rekordu](#podsumowanie-rekordu).

---

### Podsumowanie rekordu

<Frame>
  <img
    src="/images/Oferty-podsumowanie.png"
    alt="Zrzut ekranu z interfejsu: Podsumowanie rekordu"
    style={{ borderRadius:"0.5rem" }}
  />
</Frame>

#### Pasek i załącznik

Po lewej stronie znajduje się **pasek statusu**, zależny od tego, czy oferta jest w [trybie edycji](#edytuj):

- **Ciemnoszary pasek** – rekord _w trybie edycji_
- **Jasnoszary pasek** – rekord _poza trybem edycji_

Po prawej od paska, widoczne jest pole z **plikem oferty** (PDF), który mógł zostać wygenerowany lub wklejony ręcznie.

<AccordionGroup>
  <Accordion title="Wnioskowanie ze statusu i pliku" icon="file-chart-column">
    Jeżeli rekord jest w trybie edycji i nie ma pliku — nie został jeszcze wygenerowany.\
    Jeśli plik jest obecny, a rekord nie jest edytowany — oferta została wygenerowana i nie była modyfikowana.

    Rekordy w trybie edycji _z załącznikiem_ mogą zawierać zmiany wprowadzone **po** wygenerowaniu pliku.\
    W takim wypadku warto sprawdzić, czy dane w rekordzie i PDFie są spójne.\
    Po weryfikacji można wyłączyć tryb edycji — zostanie wtedy wygenerowany nowy plik PDF.
  </Accordion>
</AccordionGroup>

#### Numer, typ, klient

Na prawo od załącznika widzimy:

- **Numer oferty**
- **Typ oferty**
- **Skrót klienta**

---

## Dodawanie nowej oferty

<Frame>
  <img
    src="/images/Oferty-nowa.png"
    alt="Zrzut ekranu: Nowa oferta"
    style={{ borderRadius:"0.5rem" }}
  />
</Frame>

Po wciśnięciu przycisku "+" otwiera się okno **tworzenia nowej oferty**, w którym wybieramy typ (określający [widoczność pól](#edycja-nowej-oferty)).

---

## Edycja nowej oferty – wspólne pola

![Zrzut ekranu 2025-10-09 105143.png](/images/Zrzutekranu2025-10-09105143.png)

### Typ

Warunkuje widoczność odpowiednich pól. Dostępne typy:

- **Serwis**
- **Przegląd**
- **Części**
- **Diagnostyka**

### Data wystawienia

Automatycznie ustawiana na aktualną datę.

### Dni na akceptację

Domyślnie **30 dni**, służy do obliczenia ważności oferty.

### Numer oferty sugerowany

Pole `formula`, przechowujące numer oferty wg wzoru\
[**O-[Lp](#lp)-[miesiąc wystawienia-rok wystawienia](#data-wystawienia)**].\
W razie usunięcia zawartości wygenerowanej w `Numer oferty`, sugestia nadal dostępna w polu `formula`.

  <img
    src="/images/Zrzut ekranu 2025-10-14 090501.png"
    style={{ borderRadius:"0.5rem" }}
  />

### Numer oferty

Wyświetlany u góry, nadawany automatycznie wg wzoru:\
[**O-[Lp](#lp)-[miesiąc-rok](#data-wystawienia)**]. Może być później ręcznie edytowany.

### Kontynuacja

Używane w przypadku gdy aktualnie tworzona oferta jest **ofertą kontynuacyjną**.
W tym polu wskazuje się ofertę **poprzedzającą** do aktualnej.
Jeżeli poprzedzającej nie ma w systemie, można ją z tego poziomu dodać.

<img
  src="/images/Zrzutekranu2025-10-09093636.png"
  alt="Kontynuacja oferty"
  style={{ width:"46%" }}
/>

### Ważność oferty

Data ważności = [data wystawienia](#data-wystawienia) + [dni na akceptację](#dni-na-akceptacje).

### Lp

Liczba porządkowa rekordu w danym roku.
Automatyzacja nadaje nowy najwyższy numer każdej nowej ofercie.

<Note>
  Liczenie Lp zawsze odbywa się od najwższej wartości dla tego roku. Z tego powodu, ręczne nadanie wyższej wartości Lp, spowoduje pominięcie potencjalnych numerów oferty.
</Note>

### Nr. Sprawy

Wypełniany numerem zlecenia serwisowego (dla typu _Serwis_).

### Nr. zgłoszenia klienta

Źródło oferty:

- "Po przeglądzie",
- _Numer zgłoszenia klienta_,
- "Mail" + _data_ (odpowiedź na zapytanie mailowe).

### Szpital

Wybór klienta oferty (rekord z arkusza _Szpitale_).\
Automatycznie wypełniany przy [ofercie ze zlecenia](/interfejsy/oferty/oferta-ze-zlecenia).

### Płatnik

Jednostka płacąca. Domyślnie wypełniana automatycznie (płatnikiem danego klienta), ale można ją zmienić.

### Termin płatności

Wypełniany danymi z bazy (terminem przypisanym do płatnika), można rędznie zmienić.

<Note>
  W przypadku gdy rekord szpitala jest poprawnie uzupełniony (wskazny płatnik i termin płatności w płatniku), wypełnianie danych o kliencie wygląda w następujący sposób.

  _Wybór szpitala_ > 5s > `wypełnienie płatnika` > 5s > `wypełnienie terminu`
</Note>

### Kontakt, Email

Dane z bazy (lookup z rekordu szpitala).\
Zawsze aktualne niezależnie od daty utworzenia oferty.

### Urządzenie, Producent, Model, Nr SN, Nr INW

Dane dotyczące ofertowanego urządzenia.\
Automatycznie wypełniane przy ofercie ze zlecenia.

### Czas realizacji

Domyślnie „Do uzgodnienia”.

### Wysyłka / dojazd

- Dojazd- koszt dojazdu serwisanta do klienta. Dojazd jest płatny dla klientów z poza powiatu Poznańskiego.  Koszt netto jest automatycznie wyliczany, z arkusza szpitali pobierana jest odległość do klienta (kilometry drogą, liczone od warsztatu Kopczyńskiego).\
  Wartość netto = ( odległość x 1,5 x 2 ) zł.  W dojazd powinny być również wpisane koszty hotelu jeżeli taki byłby wymagany. Vat transportu jest ustalany w zależności od [typu urządzeń](/interfejsy/oferty/serwis#dotyczy-urz%C4%85dze%C5%84).
- Wysyłka/Wysyłka zwrotna- koszt jednej wysyłki do klienta. Automatyzacja ustawia koszt netto na 60zł i transport vat na 8%.
- Wysyłka w dwie strony- koszt jednej wysyłki do klienta. Automatyzacja ustawia koszt netto na 80zł i transport vat na 8%.

<img
  src="/images/Zrzutekranu2025-10-09112724.png"
  style={{ width:"80%" }}
/>

<img
  src="/images/Zrzutekranu2025-10-09113916.png"
  style={{ width:"82%" }}
/>

### Uwagi template

Wybór standardowych uwag z arkusza _Uwagi template_.

<img
  src="/images/Zrzutekranu2025-10-09114329.png"
  style={{ width:"60%" }}
/>

<img
  src="/images/Zrzutekranu2025-10-09114358.png"
  style={{ width:"78%" }}
/>

### Wystawiona przez

Wybór osoby z arkusza _Serwisanci_ (z uprawnieniem Admin).

<img
  src="/images/Zrzutekranu2025-10-09115244.png"
  style={{ width:"40%" }}
/>

<Note>
  Wbrew nazwie, arkusz **Serwisanci** zawiera także pracowników administracyjnych (interfejs _Kadra_).
</Note>

### Usuń ofertę

Przycisk usuwa ofertę.\
Przed usunięciem warto skasować numer z pola tekstowego, by uniknąć błędów.

### Wyślij mail

Tworzy wiadomość w domyślnej aplikacji e-mail z tytułem i treścią pobraną z rekordu.

<img
  src="/images/sd.png"
  style={{ width:"97%" }}
/>

### Generuj PDF oferty

Zmienia status pola `Edytuj` na „TAK”.\
Gdy już jest „TAK”, przycisk staje się biały z napisem „Oferta wygenerowana”.

Przycisk dopiero staje się widoczny gdy

- `Ważność oferty` nie jest pusty
- `Płatnik` nie jest pusty
- `Suma netto` nie jest "0 PLN"

Jeżeli warunki są nie spełnione, to w jego miejscu widnieje przycisk "DOKOŃCZ OFERTĘ"

### Edytuj

- Status "NIE"
  - Pole nie zakliknięte.
  - Checkbox nie widoczny.
  - Oznacza włączony tryb edycji (wyświetlane w rekordzie pola edytowalne).
  - By zakliknąć, wciśnij `Generuj PDF oferty`.
- Status "TAK"
  - Pole zakliknięte
  - Checkbox widoczny
  - Oznacza wyłączony tryb edycji (wyświetlane w rekordzie pola nie edytowalne)
  - Przy zmianie na ten status, odpala się [automatyzacja PDF](#generowanie-pdf).

<Frame caption="Nie wciśnięty edytuj (tryb edycji)">
  <img
    src="/images/Zrzutekranu2025-10-10120102.png"
    style={{ borderRadius:"0.5rem" }}
  />
</Frame>

<Frame caption="Wciśnięty edytuj (rekord nieedytowalny)">
  <img
    src="/images/Zrzutekranu2025-10-10115825.png"
    style={{ borderRadius:"0.5rem" }}
  />
</Frame>

---

## Pola specyficzne dla typów ofert

<CardGroup cols={2}>
  <Card title="Oferta serwis" icon="screwdriver-wrench" href="/interfejsy/oferty/serwis">
   // @ts-ignore
 
  </Card>
  <Card title="Oferta przegląd" icon="passport" href="/interfejsy/oferty/przeglad">
    // @ts-ignore

  </Card>
  <Card title="Oferta części" icon="boxes-stacked" href="/interfejsy/oferty/czesci">
    // @ts-ignore

  </Card>
  <Card title="Oferta diagnostyka" icon="gauge-low" href="/interfejsy/oferty/diagnostyka">
    // @ts-ignore

  </Card>
</CardGroup>

---

## Generowanie PDF

### Wysłanie zapytania do Docs Automator

Automatyzacja wysyła dane do **DocsAutomator** przez API, wklejając je w odpowiednie pola szablonu oferty.

<img
  src="/images/Zrzutekranu2025-10-10121718.png"
  style={{ width:"65%" }}
/>

Wygenerowany plik PDF można zobaczyć i pobrać w polu "pliki" na dole strony.
Dokument zostanie również zapisany na dysku google w lokalizacji  **_nazwa szpitala_ / oferty / _nr oferty_**

---

## Wypełnianie rekordu zleceń serwisowych

### Stan admin

Ustawiany na **Oferta**.

### Numer oferty

Automatyzacja konwertuje różne style numerów na jednolity wzór\
**O-n-M-YYYY**, usuwa duplikaty i łączy zlecenia z ofertami (pole typu _link to_).

<Warning>
  Przy usuwaniu oferty, usuń również formę tekstową jej numeru z rekordu. To pozwoli uniknąć błędnych powiązań wpisów.
</Warning>

### Realny koszt i VAT

Wartości wypełniane automatycznie zgodnie z opcją _dotyczy urządzenia_.

---

## Dodawanie urządzenia przy ofercie naprawy

W przypadku oferty naprawy, do bazy urządzeń dodawany jest nowy rekord z danymi oferty.

---

## Wysyłanie danych do Memento

Zmiany w polach _numer oferty_, _stan_, _stan admin_ oznaczają rekord jako **oczekujący na synchronizację**.\
Rekord zostanie wysłany do Memento po kilku minutach (1–3 minuty w przypadku pojedynczych rekordów).

---

